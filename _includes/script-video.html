<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-mobile-ui/dist/videojs-mobile-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-quality-selector-hls/dist/videojs-quality-selector-hls.min.js"></script>
<script>
  var source = document.querySelector("#my-video source");
  var sourceUrl = source.getAttribute("src");
  var videoPlayer = document.querySelector("#my-video");
  var isLiveVideo = false;
  if (sourceUrl && sourceUrl.includes(".m3u8")) {
    isLiveVideo = true;
  } else {
    videoPlayer.classList.add("not-live");
  }

  videojs("my-video", {
    controlBar: {
      volumePanel: {
        inline: false
      },
      children: [
        'playToggle',
        'volumePanel',
        'currentTimeDisplay',
        'progressControl',
        'durationDisplay',
        'liveDisplay',
        'seekToLive',
        'customControlSpacer',
        'playbackRateMenuButton',
        'chaptersButton',
        'descriptionsButton',
        'subsCapsButton',
        'audioTrackButton',
        'fullscreenToggle'
      ]
    },
    plugins: {
      mobileUi: {
        fullscreen: {
          enterOnRotate: false,
          exitOnRotate: false,
          lockOnRotate: false,
          lockToLandscapeOnEnter: true
        },
        touchControls: {
          disabled: isLiveVideo ? true : false
        }
      },
      qualitySelectorHls: {
        displayCurrentQuality: true
      }
    }
  });
</script>